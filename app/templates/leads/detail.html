{% extends "base.html" %}

{% block title %}Lead Detail: {{ lead.company_name }}{% endblock %}

{% block head %}
    {{ super() }}
    <!-- Custom CSS for lead status and item styling -->
    <style>
        /* Activity Log Item Styling */
        .activity-log-item {
            border-left: 4px solid var(--bs-primary); /* Use Bootstrap primary color */
            padding-left: 15px;
            margin-bottom: 10px;
            background-color: var(--bs-light); /* Light background for distinction */
            border-radius: 5px;
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .activity-log-item:last-child {
            margin-bottom: 0;
        }

        /* Task Item Styling */
        .task-item {
            border-left: 4px solid var(--bs-info); /* Use Bootstrap info color */
            padding-left: 15px;
            margin-bottom: 10px;
            background-color: var(--bs-white); /* White background */
            border-radius: 5px;
            padding-top: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--bs-border-color); /* Subtle separator */
        }
        .task-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        .task-item.list-group-item-success {
            border-left-color: var(--bs-success); /* Green for completed tasks */
            background-color: var(--bs-success-bg-subtle); /* Lighter green background */
        }

        /* Custom Badge Colors for Lead Statuses */
        .badge-status-new { background-color: #0d6efd; } /* Bootstrap primary */
        .badge-status-qualified { background-color: #6610f2; } /* Bootstrap purple */
        .badge-status-contacted { background-color: #fd7e14; } /* Bootstrap orange */
        .badge-status-proposal-sent { background-color: #ffc107; } /* Bootstrap warning */
        .badge-status-negotiation { background-color: #198754; } /* Bootstrap success */
        .badge-status-converted { background-color: #20c997; } /* Bootstrap teal */
        .badge-status-lost { background-color: #dc3545; } /* Bootstrap danger */
        .badge-status-pending { background-color: #6c757d; } /* Bootstrap secondary */
        .badge-status-completed { background-color: #28a745; } /* Bootstrap success */
    </style>
{% endblock %}

{% block content %}
    <div class="container mt-4">
        {% include '_messages.html' %} {# Include flash messages #}

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">Dashboard</a></li>
                <li class="breadcrumb-item"><a href="{{ url_for('leads.list_leads') }}">Leads</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ lead.company_name }}</li>
            